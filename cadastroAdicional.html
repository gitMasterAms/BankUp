<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <title>Cadastro</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>

  <!-- Container principal centralizado -->
  <div class="cadastro-wrapper">
    <!-- Formulário de cadastro -->
    <form id="cadastroForm" class="cadastro-form">
      <!-- Título do formulário -->
      <h2 class="cadastro-titulo">ADD CADASTRO ADICIONAL</h2>

      <!-- Campo de e-mail -->
      <label for="name">Nome</label>
      <input type="text" id="name" placeholder="Digite seu nome" required>

      <!-- Campo de senha -->
      <label for="cpf_cnpj">cpf_cnpj</label>
      <input type="text" id="cpf_cnpj" placeholder="Digite sua cpf_cnpj" required>
      
      <label for="phone">phone</label>
      <input type="phone" id="phone" placeholder="Digite sua phone" required>

       <label for="address">address</label>
      <input type="address" id="address" placeholder="Digite sua address" required>

       <label for="birthdate">birthdate</label>
      <input type="date" id="birthdate" placeholder="Digite sua birthdate" required>

      <!-- Botão que executa a função de verificação de e-mail -->
      <button type="submit">CADASTRAR</button>

      <!-- Link para a tela de login -->
      <p class="login-link">Já tem uma conta? <a href="login.html">Entrar</a></p>
    </form>
  </div>
  <script>
    document.getElementById('cadastroForm').addEventListener('submit', async function(e) {
        e.preventDefault();

 const token = localStorage.getItem('authToken');
           
        const dados = {
            name: document.getElementById('name').value,
            cpf_cnpj: document.getElementById('cpf_cnpj').value,
            phone: document.getElementById('phone').value,
            address: document.getElementById('address').value,
            birthdate: document.getElementById('birthdate').value
        };

        try {
            const response = await fetch('http://100.108.7.70:3000/client', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'Authorization': `Bearer ${token}`
                },
                body: JSON.stringify(dados)
            });

            const resultado = await response.json();

            if (resultado) {
                window.alert(resultado.msg);
            } else {
              console.log('deu merda');
            }
        } catch {
            {
              console.log('deu merda');
            }
        }
    });
  </script>
</body>
</html>
